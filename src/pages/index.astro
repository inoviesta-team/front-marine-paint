---
import MarineLayout from "@layouts/MarineLayout.astro";
import MarineHeader from "@components/layout/MarineHeader";
import MarineFooter from "@components/layout/MarineFooter";
import MarineButton from "@components/ui/MarineButton";
import MarineProductCard from "@components/product/MarineProductCard";
import MarineProjectCard from "@components/project/MarineProjectCard";
import MarineArticleCard from "@components/article/MarineArticleCard";
import MarineValueCard from "@components/value/MarineValueCard";
import MarineTestimonialCard from "@components/testimonial/MarineTestimonialCard";
import MarineContactForm from "@components/contact/MarineContactForm";
import { productApi } from "@api/products";

// Fetch featured products
let featuredProducts = [];
try {
  featuredProducts = await productApi.getAllProducts({ limit: 5 });
} catch (error) {
  console.error('Failed to fetch products:', error);
  // We'll use an empty array as a fallback
}

// Map products to have the right naming 
const marineProducts = featuredProducts.map(product => ({
  ...product,
  name: `Anti-fouling AF-300`,
  price: 110000
}));
---

<MarineLayout
  title="Marine Paint - Marine Paint Solutions"
  description="Marine Paint provides high-quality marine paint solutions for all types of vessels."
>
  <MarineHeader client:load />
  
  <!-- Hero Section -->
  <section class="bg-gray-100 py-16">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
      <div class="grid grid-cols-1 lg:grid-cols-2 gap-12 items-center">
        <div class="space-y-8">
          <div class="h-12 w-48 bg-black"></div>
          <h1 class="font-mono font-bold text-black text-3xl md:text-4xl lg:text-5xl w-4/5">
            <div class="h-4 bg-black w-full mb-4"></div>
            <div class="h-4 bg-black w-3/4 mb-4"></div>
          </h1>
          
          <div class="flex flex-wrap gap-4">
            <MarineButton
              as="a" 
              href="/products" 
              variant="primary"
            >
              Belanja Sekarang
            </MarineButton>
            
            <MarineButton
              as="a" 
              href="/contact-us" 
              variant="secondary"
              className="flex items-center gap-2"
            >
              <span>Hubungi kami</span>
              <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M20 4H4C2.9 4 2.01 4.9 2.01 6L2 18C2 19.1 2.9 20 4 20H20C21.1 20 22 19.1 22 18V6C22 4.9 21.1 4 20 4ZM20 8L12 13L4 8V6L12 11L20 6V8Z" fill="currentColor"/>
              </svg>
            </MarineButton>
          </div>
        </div>
        
        <div class="border border-gray-300 h-48 md:h-64 lg:h-80 flex items-center justify-center">
          <span class="text-gray-400">Hero Image</span>
        </div>
      </div>
    </div>
  </section>

  <!-- Featured Products Section -->
  <section class="py-16">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
      <h2 class="font-mono font-bold text-black text-3xl text-center mb-12">Featured Products</h2>
      
      <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-5 gap-6">
        {marineProducts.map((product) => (
          <MarineProductCard product={product} />
        ))}
      </div>
      
      <div class="flex justify-center mt-8">
        <MarineButton as="a" href="/products" variant="secondary">
          Lihat Semua
        </MarineButton>
      </div>
    </div>
  </section>

  <!-- Value Proposition Section -->
  <section class="py-16 bg-white">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
      <h2 class="font-mono font-bold text-black text-3xl text-center mb-12">Value Proposition</h2>
      
      <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8">
        <MarineValueCard title="Produk Berkualitas" />
        <MarineValueCard title="Pengiriman Cepat" />
        <MarineValueCard title="Konsultasi Gratis" />
        <MarineValueCard title="Dukungan Teknis" />
      </div>
    </div>
  </section>

  <!-- Projects Section -->
  <section class="py-16">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
      <h2 class="font-mono font-bold text-black text-3xl text-center mb-12">Projects</h2>
      
      <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6">
        {Array(4).fill(0).map((_, i) => (
          <MarineProjectCard />
        ))}
      </div>
      
      <div class="flex justify-center mt-8">
        <MarineButton as="a" href="/projects" variant="secondary">
          Lihat Semua
        </MarineButton>
      </div>
    </div>
  </section>

  <!-- Testimonials Section -->
  <section class="py-16 bg-white">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
      <h2 class="font-mono font-bold text-black text-3xl text-center mb-12">Testimonials</h2>
      
      <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
        {Array(3).fill(0).map((_, i) => (
          <MarineTestimonialCard />
        ))}
      </div>
    </div>
  </section>

  <!-- Company Partners Section -->
  <section class="py-16">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
      <h2 class="font-mono font-bold text-black text-3xl text-center mb-12">Company Partners</h2>
      
      <div class="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-8">
        {Array(6).fill(0).map((_, i) => (
          <div class="border border-gray-300 h-20 flex items-center justify-center">
            <span class="text-gray-400">Partner Logo</span>
          </div>
        ))}
      </div>
    </div>
  </section>

  <!-- Related Articles Section -->
  <section class="py-16 bg-white">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
      <h2 class="font-mono font-bold text-black text-3xl text-center mb-12">Related Articles</h2>
      
      <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
        {Array(3).fill(0).map((_, i) => (
          <MarineArticleCard
            article={{
              title: i % 2 === 0 ? 
                "Tips Perawatan Cat Marine agar lebih Awet dan Tahan Lama" : 
                "Tips Memilih Cat Kapal untuk Nelayan Tradisional",
              excerpt: "Lorem ipsum dolor sit amet...",
              readTime: "3 mins reading",
              publishedAt: "1 month ago"
            }}
          />
        ))}
      </div>
      
      <div class="flex justify-center mt-8">
        <MarineButton as="a" href="/articles" variant="secondary">
          Lihat Semua
        </MarineButton>
      </div>
    </div>
  </section>

  <!-- Contact Section -->
  <section class="py-16">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
      <h2 class="font-mono font-bold text-black text-3xl text-center mb-12">Hubungi kami</h2>
      
      <div class="grid grid-cols-1 lg:grid-cols-2 gap-12">
        <MarineContactForm client:load />
        
        <div class="border border-gray-300 rounded-full h-full flex items-center justify-center">
          <span class="text-gray-400">Map or Contact Information</span>
        </div>
      </div>
    </div>
  </section>

  <!-- Footer -->
  <MarineFooter client:visible />
</MarineLayout>
